import { extractArgTypes } from '@astrouxds/storybook-addon-docs-stencil'
import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs'
import { html, render } from 'lit-html'
const args = extractArgTypes('rux-toast')
args.message.defaultValue =
    'This is a toast.'

<Meta
    title="Components/Toast"
    component="rux-toast"
    subcomponents={{
        RuxToastStack: 'rux-toast-stack'
    }}
    argTypes={args}
    parameters={{
        actions: {
            handles: [
              'ruxtoastopen rux-toast',
              'ruxtoastclosed rux-toast'
              ],
        },
    }}
/>

# Toast

Alerts that confirm user actions, and typically don’t require a response, may be displayed in a toast. Toasts should display within the toast-stack component, in the user’s field-of-view. A toast will overlay ui content, but shouldn't block higher level alerts, such as those in a monitoring icon in the Global Status Bar.

A toast should not contain critical information or require user action.

Toasts should array down in a toast stack, with the most recent toast appearing and slotting in at the top.

Toasts can be created imperatively via method using the toast-stack component. A toast on its own will need to be added into the appropriate toast stack.

export const Default = (args) => {
    return html`
<div style="display: flex; flex-flow: column; justify-content: center; align-items: center;">
    <rux-toast
        .closeAfter="${args.closeAfter}"
        .hideClose="${args.hideClose}"
        message="${args.message}"
    ></rux-toast>
</div>
    `
}

<Canvas>
    <Story
        name="Default"
        height="100px"
        args={{
            closeAfter: null,
            hideCLose: null,
            message: "This is a toast",
        }}
    >
        {Default.bind()}
    </Story>
</Canvas>

## Usage

### Multiple Toasts

When a toast is created, it automatically will create a toast-stack component to manage its position in the viewport and all incoming toasts. Best practice is to limit the amount of toasts shown in an app at a time to 4.

## API

<ArgsTable of="rux-toast" />

## Variants

### Auto Close

Sets a value in seconds or milliseconds to close the toast.

export const ToastAutoClose = (args) => {
    return html`
<div style="display: flex; flex-flow: column; justify-content: center; align-items: center;">
    <rux-toast
        .closeAfter="${args.closeAfter}"
        message="This toast will disappear in 2000 ms."
    ></rux-toast>
</div>
    `
}

<Canvas>
    <Story
        args={{
            closeAfter: 2000,
        }}
        name="Auto Close"
        height="100px"
    >
        {ToastAutoClose.bind()}
    </Story>
</Canvas>

### Hide Close

In cases like auto close where you don't want to allow the user to be able to manually close the toast,
you may use the `hide-close` attribute.

export const HideClose = (args) => {
    return html`
<div style="display: flex; flex-flow: column; justify-content: center; align-items: center;">
    <rux-toast
        .hideClose="${args.hideClose}"
        message="Toast without the close icon."
    ></rux-toast>
</div>
    `
}

<Canvas>
    <Story
        args={{
            closeAfter: null,
            hideClose: true
        }}
        name="Hide Close"
        height="100px"
    >
        {HideClose.bind()}
    </Story>
</Canvas>

### Default Slot

Use the default slot for more control over the content inside your toast, for example, adding a link
within your message.

> NOTE: Content placed inside the default slot will override the `message` attribute.

export const DefaultSlot = (args) => {
    return html`
<div style="display: flex; flex-flow: column; justify-content: center; align-items: center;">
    <rux-toast
        .closeAfter="${args.closeAfter}"
        .message="${args.message}"
        .hideClose="${args.hideClose}"
    >
    Toast
    <a href="#" style="margin-left: 8px">Link</a>
    </rux-toast>
</div>
    `
}

<Canvas>
    <Story name="Default Slot" height="100px">
        {DefaultSlot.bind()}
    </Story>
</Canvas>

### All Variants

export const AllVariants = () => html`
<div style="display: flex; flex-flow: column; justify-content: center; align-items: center;">
      <rux-toast message="Toast with message set via prop.">
      </rux-toast>
      <rux-toast>
          Toast with content set via default slot
          <a href="#" style="margin-left: 8px">Link</a>
      </rux-toast>
      <rux-toast
        hide-close="true"
        message="Toast with close icon hidden."
    ></rux-toast>
    <rux-toast
        close-after="2000"
        hide-close="true"
        message="Toast will close after 2000ms"
    ></rux-toast>
    </div>
`

<Canvas>
    <Story
        name="All Variants"
        argTypes={{
            closeAfter: { table: { disable: true } },
            message: { table: { disable: true } },
            open: { table: { disable: true } },
            status: { table: { disable: true } }
        }}
    >
        {AllVariants.bind()}
    </Story>
</Canvas>

## Cherry Picking

If you're already utilizing a build system that supports tree shaking and want to only import this individual component:

```js
import { RuxToast } from '@astrouxds/astro-web-components/dist/components/rux-toast'
import { RuxToastStack } from '@astrouxds/astro-web-components/dist/components/rux-toast-stack'
import { RuxIcon } from '@astrouxds/astro-web-components/dist/components/rux-icon'
import { RuxIconClear } from '@astrouxds/astro-web-components/dist/components/rux-icon-clear'
customElements.define('rux-toast', RuxToast)
customElements.define('rux-toast-stack', RuxToastStack)
customElements.define('rux-icon', RuxIcon)
customElements.define('rux-icon-clear', RuxIconClear)
```
